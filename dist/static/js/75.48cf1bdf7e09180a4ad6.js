webpackJsonp([75],{IPoe:function(t,e){},kF1j:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("fZjL"),r=a.n(o),s=a("2eFk"),n=a("Ke24"),i=a("fPyK"),l=a("nsZK"),c=a("P9l9"),u=a("Ch4/"),d=a("PI0u"),p={name:"reviewed",props:{brandId:{type:String,default:function(){return""}},activeGroupId:{type:String,default:function(){return""}}},data:function(){return{tableH:window.screen.availHeight-464-126,activeId:"3",activeBrand:this.brandId,activeGroup:this.activeGroupId,topMenuData:[{id:"1",name:"指标管理",path:"/monthList?appIcon="+this.$route.query.appIcon},{id:"2",name:"月指标",path:"/monthList?appIcon="+this.$route.query.appIcon},{id:"3",name:"门店月指标",path:""}],selectRadio:0,showDialog:!1,conditionObj:{keyword:"",storeStatus:"",isCompleted:"",storeGroupIds:[]},completeStatusOptions:[{label:"门店完善状态",value:""},{label:"已完善",value:"1"},{label:"未完善",value:"0"}],storeStatusOptions:[{value:"",label:"所有门店状态"},{value:"0",label:"待审核"},{value:"1",label:"正常"},{value:"2",label:"审核失败"},{value:"3",label:"停业整顿"},{value:"4",label:"回收站"},{value:"5",label:"删除"}],statistics:{},tableData:[],multipleSelection:[],dialogVisible:!1,currentPage:1,pageSize:20,total:0}},computed:{},methods:{searchStore:Object(d.a)(function(t){this.currentPage,this.getTableList()},500),clearInput:function(t){1==this.currentPage?this.getTableList():this.currentPage=1},checkStoreGroupIds:function(t){this.currentPage=1,this.conditionObj.storeGroupIds=t,this.getTableList()},selectBrandId:function(t){this.activeBrand=t},setSelectTab:function(t){this.activeTab=t.tabId},changeSelect:function(){this.currentPage=1,this.getTableList()},handleSizeChange:function(t){this.pageSize=t,this.getTableList()},handleCurrentChange:function(t){this.currentPage=t,this.getTableList()},toSalerMonth:function(t,e){this.$router.push("/salerMonthDetail?storeId="+e.storeId+"&yearMonth="+this.yearMonth+"&appIcon="+this.$route.query.appIcon)},getTableList:function(t){var e=this,a={yearMonth:e.yearMonth||e.$route.query.yearMonth,keyword:e.conditionObj.keyword||"",storeStatus:e.conditionObj.storeStatus||"",isCompleted:e.conditionObj.isCompleted||"",storeGroupIds:e.conditionObj.storeGroupIds.map(function(t){return t.groupId}).join(",")||"",pageNum:e.currentPage,pageSize:e.pageSize,brandId:e.activeBrand};Object(c.a)("/haoban-app-performance-web/performance/query-store-month-performance",a).then(function(t){var a=t.data;if(1==a.errorCode)return a.result.list&&a.result.list.length&&(a.result.list.forEach(function(t){t.performance=Object(d.d)(Number(t.performance))}),a.result.statistics&&r()(a.result.statistics).length?(e.statistics=a.result.statistics,e.tableData.unshift({completeStatus:a.result.statistics.totalComplete,performance:Object(d.d)(Number(a.result.statistics.totalPerformance)),storeName:a.result.statistics.totalStore,totalComplete:a.result.statistics.totalComplete,totalPerformance:Object(d.d)(Number(a.result.statistics.totalPerformance)),totalStore:a.result.statistics.totalStore})):e.tableData.unshift({completeStatus:e.statistics.totalComplete,performance:Object(d.d)(Number(e.statistics.totalPerformance)),storeName:e.statistics.totalStore,totalComplete:e.statistics.totalComplete,totalPerformance:e.statistics.totalPerformance,totalStore:e.statistics.totalStore})),e.tableData=a.result.list||[],void(e.total=a.result.pageInfo.total);u.a.errorMsg(a)}).catch(function(t){e.$message.error({duration:1e3,message:t.message})})}},watch:{brandId:function(t,e){t&&(this.activeBrand=t,this.yearMonth=this.$route.query.yearMonth,this.getTableList())},activeGroupId:function(t,e){t&&(this.activeGroup=t)}},mounted:function(){document.documentElement.style.backgroundColor="#f0f2f5",this.$emit("showTab","11"),this.activeBrand=this.brandId,this.activeGroup=this.activeGroupId,this.conditionObj.storeId=this.$route.query.storeId,this.brandId&&(this.yearMonth=this.$route.query.yearMonth,this.getTableList())},destroyed:function(){document.documentElement.style.backgroundColor="#fff"},components:{appDetail:s.a,commonDetailTop:n.a,qrcodeDialog:i.a,storeTreeSelect:l.a}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-customer-wrap common-set-wrap common-right-wrap"},[a("common-detail-top",{attrs:{topMenuData:t.topMenuData,activeId:t.activeId}}),t._v(" "),a("div",{staticClass:"daily-set-content boder-box"},[a("div",{staticClass:"table-condition flex flex-space-between m-b-23"},[a("div",{staticClass:"table-condition-left"},[a("el-input",{staticClass:"w-264 margin-l-10",attrs:{placeholder:"请输入门店名称/code","prefix-icon":"el-icon-search",clearable:""},on:{change:t.clearInput},nativeOn:{keyup:function(e){return a=e,t.searchStore(a);var a},clear:function(e){return t.clearInput(e)}},model:{value:t.conditionObj.keyword,callback:function(e){t.$set(t.conditionObj,"keyword",e)},expression:"conditionObj.keyword"}}),t._v(" "),a("el-select",{staticClass:"w-131 m-l-10",attrs:{placeholder:"请选择"},on:{change:t.changeSelect},model:{value:t.conditionObj.storeStatus,callback:function(e){t.$set(t.conditionObj,"storeStatus",e)},expression:"conditionObj.storeStatus"}},t._l(t.storeStatusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{staticClass:"w-131 m-l-10",attrs:{placeholder:"请选择"},on:{change:t.changeSelect},model:{value:t.conditionObj.isCompleted,callback:function(e){t.$set(t.conditionObj,"isCompleted",e)},expression:"conditionObj.isCompleted"}},t._l(t.completeStatusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("store-tree-select",{attrs:{brandId:t.brandId,activeGroupId:t.activeGroupId},on:{checkStoreGroupIds:t.checkStoreGroupIds}})],1),t._v(" "),a("div",{staticClass:"table-condition-right"})]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"select-table",style:{width:"100%",minHeight:t.tableH},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"门店名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:["flex flex-pack-center flex-start",e.row.totalStore?"color-303133":""]},[t._v(t._s(e.row.totalStore?"总计："+e.row.totalStore+"家":e.row.storeName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"月指标"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:[e.row.totalStore?"color-303133":""]},[t._v(t._s(e.row.performance))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"门店完善状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.totalStore?a("div",{staticClass:"color-303133"},[t._v(t._s("已完善："+e.row.totalComplete+"家"))]):a("div",[t._v(t._s(0==e.row.completeStatus?"未完善":"已完善"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.totalStore?t._e():a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toSalerMonth(e.$index,e.row)}}},[t._v("导购月指标详情")])]}}])})],1),t._v(" "),0!=t.tableData.length?a("div",{staticClass:"block common-wrap__page text-right m-t-24"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[20,40,60,80],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1),t._v(" "),a("qrcode-dialog",{ref:"qrcodePreview",model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}})],1)},staticRenderFns:[]};var b=a("VU/8")(p,h,!1,function(t){a("IPoe")},"data-v-084ea055",null);e.default=b.exports}});