webpackJsonp([20],{"71JE":function(e,t){},Zx22:function(e,t,a){"use strict";var s={name:"custom-dialog",props:{value:{type:Boolean,default:!1},storeChangeData:{type:[Object,Array]}},data:function(){return{repProjectName:"gic-web",customDialog:this.value,leftData:[],rightData:[]}},methods:{handleCardClose:function(){this.customCancel()},customCancel:function(){this.customDialog=!1,this.$emit("input",this.customDialog)},formatDate:function(e,t){function a(e){return e>9?""+e:"0"+e}var s=new Date(e),i=s.getFullYear(),n=s.getMonth()+1,o=s.getDate();return i+t+a(n)+t+a(o)+t},handleData:function(){}},watch:{value:function(e,t){this.customDialog=e},storeChangeData:function(e,t){this.leftData=e.beforeContent,this.rightData=e.afterContent}},mounted:function(){this.leftData=this.storeChangeData.beforeContent,this.rightData=this.storeChangeData.afterContent}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-dialog-wrap"},[a("el-dialog",{attrs:{title:"门店图片变更",visible:e.customDialog,width:"600px","before-close":e.handleCardClose},on:{"update:visible":function(t){e.customDialog=t}}},[a("div",{staticClass:"dialog-content"},[a("el-row",[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content bg-purple-dark"},[e._v("\n            变更前\n          ")]),e._v(" "),a("div",{staticClass:"data-body"},[a("div",{staticClass:"data-body-content flex flex-column"},[e._l(e.leftData,function(e,t){return[a("img",{key:"img"+t,attrs:{src:e,alt:""}})]})],2)])]),e._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content bg-purple-dark"},[e._v("\n            变更后\n          ")]),e._v(" "),a("div",{staticClass:"data-body"},[a("div",{staticClass:"data-body-content flex flex-column"},[e._l(e.rightData,function(e,t){return[a("img",{key:"img0"+t,attrs:{src:e,alt:""}})]})],2)])])],1)],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(e){a("71JE")},"data-v-709a6f08",null);t.a=n.exports},uR8N:function(e,t){},xCEU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("3Xzz"),i=a("Zx22"),n=a("3E4D"),o=a("Ch4/"),r=a("PI0u"),l=a("P9l9"),c={name:"unreview",data:function(){return{navpath:[{name:"首页",path:"/index"},{name:"审核中心",path:"/unreview"},{name:"待审核",path:""}],filterValue:"",filterOptions:[{label:"全部事项",value:""},{label:"门店信息变更",value:"0"},{label:"新增成员",value:"1"},{label:"成员离职",value:"2"}],tableData:[],multipleSelection:[],currentPage:1,pageSize:20,total:0,selectId:"",ruleForm:{refuseReason:""},rules:{refuseReason:[{required:!0,message:"拒绝理由不能为空",trigger:"change"},{min:1,max:50,message:"长度在 1 到 50 个字",trigger:"change"}]},showStoreDialog:!1,storeChangeData:{beforeContent:[],afterContent:[]},approveVisible:!1,refuseVisible:!1}},filters:{formatTimeYMD:function(e){return"--"!=e?e.split(" ")[0]:"--"},formatTimeHMS:function(e){return"--"!=e?e.split(" ")[1]:"--"},formatNum:function(e){return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")}},computed:{},methods:{handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pageSize=e,this.getTableList()},handleCurrentChange:function(e){this.currentPage=e,this.getTableList()},handleClick:function(e,t,a){this.selectId=t.enterpriseAuditingId,a?this.refuseVisible=!0:this.approveVisible=!0},sendApprove:function(){this.postApprove(this.selectId)},approveAll:function(){var e=this.multipleSelection.length?this.multipleSelection.map(function(e){return e.enterpriseAuditingId}):"";if(!e)return this.$message({message:"请至少选择一条审核事项",type:"warning"}),!1;this.postAllApprove(e)},postApprove:function(e){var t=this,a={enterpriseAuditingId:e};Object(l.e)("/haoban-manage-web/audit/approve.json",a).then(function(e){var a=e.data;if(1==a.errorCode)return n.a.showmsg("操作成功","success"),t.approveVisible=!1,void t.getTableList();o.a.errorMsg(a)}).catch(function(e){t.$message.error({duration:1e3,message:e.message})})},postAllApprove:function(e){var t=this,a={enterpriseAuditingIds:e};Object(l.e)("/haoban-manage-web/audit/batch-approve.json",a).then(function(e){var a=e.data;if(1==a.errorCode)return n.a.showmsg("操作成功","success"),void t.getTableList();o.a.errorMsg(a)}).catch(function(e){t.$message.error({duration:1e3,message:e.message})})},cancelRefuse:function(e){this.refuseVisible=!1,this.$refs.ruleForm.resetFields()},sendRefuse:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.postRefuse()})},postRefuse:function(){var e=this,t={enterpriseAuditingId:e.selectId,refuseReason:e.ruleForm.refuseReason};Object(l.a)("/haoban-manage-web/audit/refuse.json",t).then(function(t){var a=t.data;if(1==a.errorCode)return n.a.showmsg("操作成功","success"),e.refuseVisible=!1,e.$refs.ruleForm.resetFields(),void e.getTableList();o.a.errorMsg(a)}).catch(function(t){e.$message.error({duration:1e3,message:t.message})})},showSingleInfo:function(e){},showStoreChange:function(e){this.storeChangeData={beforeContent:[],afterContent:[]},this.showStoreDialog=!0,this.storeChangeData={beforeContent:""!=e.beforeContent?JSON.parse(e.beforeContent):[],afterContent:""!=e.afterContent?JSON.parse(e.afterContent):[]}},getTableList:function(e){var t=this,a={auditingType:t.filterValue,auditingStatus:"0",search:"",pageNum:t.currentPage,pageSize:t.pageSize};Object(l.a)("/haoban-manage-web/audit/auditing-list.json",a).then(function(e){var a=e.data;if(1==a.errorCode)return a.result&&a.result.list&&a.result.list.forEach(function(e,t){e.createTime&&(e.createTime=Object(r.c)(e.createTime))}),t.tableData=a.result.list,void(t.total=a.result.total);o.a.errorMsg(a)}).catch(function(e){t.$message.error({duration:1e3,message:e.message})})}},mounted:function(){this.getTableList()},components:{navCrumb:s.a,storeChange:i.a}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unreview-wrap common-set-wrap"},[a("nav-crumb",{attrs:{navpath:e.navpath}}),e._v(" "),a("div",{staticClass:"right-content"},[a("div",{staticClass:"right-box",style:{"min-height":e.$store.state.bgHeight}},[a("div",{staticClass:"reviewed-body-head flex flex-space-between"},[a("el-select",{staticClass:"w-130",attrs:{placeholder:"全部事项"},on:{change:e.getTableList},model:{value:e.filterValue,callback:function(t){e.filterValue=t},expression:"filterValue"}},e._l(e.filterOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.approveAll}},[e._v("批量同意")])],1),e._v(" "),a("div",{staticClass:"reviewed-body-content"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"审核事项"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(0==t.row.auditingType?"门店信息变更":1==t.row.auditingType?"新增成员":"成员离职")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"提交人","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"flex"},[a("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"},on:{show:function(a){e.showSingleInfo(t.row.applyId)}}},[a("div",{staticClass:"apply-info-detail"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"apply-info-img flex-align-center flex-pack-center bg-82C5FF "},[t.row.headPic?a("img",{attrs:{src:t.row.headPic,alt:"img"}}):a("i",{staticClass:"iconfont icon-yewuduanmorentouxian"})]),e._v(" "),a("div",{staticClass:"flex flex-column apply-info-right flex-space-between"},[a("div",{staticClass:"apply-info-name"},[e._v("\n                          "+e._s(t.row.applyName)+"\n                          "),a("i",{class:[2==t.row.sex?"icon-xingbienv color-FF585C":"icon-xingbienan color-508CEE","iconfont"]})]),e._v(" "),a("div",{staticClass:"apply-info-code"},[a("span",{staticClass:"w-80"},[e._v("员工代码：")]),a("span",{staticClass:"w-130"},[e._v(e._s(t.row.code))])]),e._v(" "),a("div",{staticClass:"apply-info-phone"},[a("span",{staticClass:"w-80"},[e._v("手机号：")]),a("span",{staticClass:"w-130"},[e._v(e._s(t.row.phoneNumber))])]),e._v(" "),a("div",{staticClass:"apply-info-job"},[a("span",{staticClass:"w-80"},[e._v("职位：")]),a("span",{staticClass:"w-130"},[e._v(e._s(t.row.positionName))])]),e._v(" "),a("div",{staticClass:"apply-info-store"},[a("span",{staticClass:"w-80"},[e._v("所属门店：")]),a("span",{staticClass:"w-130"},[e._v(e._s(t.row.storeName))])])])])]),e._v(" "),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"flex flex-align-center flex-pack-center bg-82C5FF table-head-pic"},[t.row.headPic?a("img",{attrs:{src:t.row.headPic,alt:"img"}}):a("i",{staticClass:"iconfont icon-yewuduanmorentouxian"})])])]),e._v(" "),a("div",{staticClass:"flex flex-column apply-info"},[a("span",[e._v(e._s(t.row.applyName))]),e._v(" "),a("span",{staticClass:"font-13"},[e._v(e._s(t.row.storeName))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"详情","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.row.auditingType||0==t.row.auditingType&&1!=t.row.auditingUpdateType?a("span",[e._v(e._s(t.row.detail))]):e._e(),e._v(" "),1==t.row.auditingUpdateType?a("div",{staticClass:"line-hidden-2"},[a("span",[e._v(e._s(t.row.detail))]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showStoreChange(t.row)}}},[e._v("查看详情")])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"提交时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"line-h-18"},[e._v(e._s(e._f("formatTimeYMD")(t.row.createTime)))]),e._v(" "),a("div",{staticClass:"line-h-18"},[e._v(e._s(e._f("formatTimeHMS")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.$index,t.row)}}},[e._v("同意")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.$index,t.row,"refuse")}}},[e._v("拒绝")])]}}])})],1),e._v(" "),0!=e.tableData.length?a("div",{staticClass:"block common-wrap__page text-right"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)])]),e._v(" "),a("vue-gic-footer"),e._v(" "),a("storeChange",{attrs:{storeChangeData:e.storeChangeData},model:{value:e.showStoreDialog,callback:function(t){e.showStoreDialog=t},expression:"showStoreDialog"}}),e._v(" "),a("el-dialog",{staticClass:"approve-dialog",attrs:{title:"",visible:e.approveVisible,width:"422px"},on:{"update:visible":function(t){e.approveVisible=t}}},[a("div",{staticClass:"approve-body text-center"},[a("div",[a("i",{staticClass:"el-icon-success"}),a("span",{staticClass:"approve-icon-tip"},[e._v("同意")])]),e._v(" "),a("div",{staticClass:"approve-tip"},[e._v("是否确认同意")])]),e._v(" "),a("div",{staticClass:"approve-footer dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.approveVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sendApprove}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticClass:"refuse-dialog",attrs:{title:"提示",visible:e.refuseVisible,"before-close":e.cancelRefuse,width:"422px"},on:{"update:visible":function(t){e.refuseVisible=t}}},[a("div",[a("div",{staticClass:"refuse-tip"},[e._v("请输入拒绝理由")]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"",prop:"refuseReason"}},[a("el-input",{staticClass:"font-14",attrs:{type:"textarea",placeholder:"最多 50 个字",rows:3},model:{value:e.ruleForm.refuseReason,callback:function(t){e.$set(e.ruleForm,"refuseReason",t)},expression:"ruleForm.refuseReason"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"approve-footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelRefuse("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sendRefuse("ruleForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var f=a("VU/8")(c,u,!1,function(e){a("uR8N")},"data-v-10b56208",null);t.default=f.exports}});