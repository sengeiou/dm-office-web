webpackJsonp([14],{HKlq:function(e,t){},e8iM:function(e,t){},n7j5:function(e,t,i){"use strict";var a=i("mvHQ"),s=i.n(a),n={name:"select-area",components:{vueSelectEmployee:i("c4uw").a},props:{treeData:{type:Object,default:function(){return{}}},butList:{type:Array,default:function(){return[]}},specialList:{type:Array,default:function(){return[]}}},data:function(){return{copyTreeData:JSON.parse(s()(this.treeData))}},methods:{delCurrent:function(e,t){var i=this[t];i.splice(i.indexOf(e),1)},handleSelectedList:function(e){this.butList=e},callSelector:function(e,t){this.$emit("callPerSelector",e,t)}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"select-area"},[i("div",{staticClass:"setting-name"},[e._v("\n    个别员工不设置该权限\n  ")]),e._v(" "),i("ul",{staticClass:"particular-list"},[e._l(e.butList,function(t,a){return[t.employeeClerkId?i("li",{key:a+"_"+t.employeeClerkId,staticClass:"item person-item"},[t.headPic?i("img",{attrs:{src:t.headPic}}):i("div",{staticClass:"replace-head-img"},[i("i",{staticClass:"iconfont icon-yewuduanmorentouxian"})]),e._v(" "),i("p",{staticClass:"name"},[e._v(e._s(t.label))]),e._v(" "),i("i",{staticClass:"el-icon-circle-close",on:{click:function(i){e.delCurrent(t,"butList")}}})]):i("li",{key:a+"_"+t.groupId,staticClass:"item group-item"},[e._v("\n        "+e._s(t.label)+"\n        "),i("i",{staticClass:"el-icon-circle-close",on:{click:function(i){e.delCurrent(t,"butList")}}})])]}),e._v(" "),i("li",{staticClass:"item J_add-btn",on:{click:function(t){e.callSelector("but",e.butList)}}},[i("i",{staticClass:"el-icon-plus"})])],2),e._v(" "),i("div",{staticClass:"setting-name"},[e._v("\n    允许指定部门/人员可见\n  ")]),e._v(" "),i("ul",{staticClass:"particular-list"},[e._l(e.specialList,function(t,a){return[t.employeeClerkId?i("li",{key:a+"_"+t.employeeClerkId,staticClass:"item person-item"},[t.headPic?i("img",{attrs:{src:t.headPic}}):i("div",{staticClass:"replace-head-img"},[i("i",{staticClass:"iconfont icon-yewuduanmorentouxian"})]),e._v(" "),i("p",{staticClass:"name"},[e._v(e._s(t.label))]),e._v(" "),i("i",{staticClass:"el-icon-circle-close",on:{click:function(i){e.delCurrent(t,"specialList")}}})]):i("li",{key:a+"_"+t.groupId,staticClass:"item group-item"},[e._v("\n        "+e._s(t.label)+"\n        "),i("i",{staticClass:"el-icon-circle-close",on:{click:function(i){e.delCurrent(t,"specialList")}}})])]}),e._v(" "),i("li",{staticClass:"item J_add-btn",on:{click:function(t){e.callSelector("special",e.specialList)}}},[i("i",{staticClass:"el-icon-plus"})])],2)])},staticRenderFns:[]};var l={name:"permissionSetting",components:{selectArea:i("VU/8")(n,r,!1,function(e){i("HKlq")},null,null).exports},props:{butList:{type:Array,default:function(){return[]}},specialList:{type:Array,default:function(){return[]}},selfButList:{type:Array,default:function(){return[]}},selfSpecialList:{type:Array,default:function(){return[]}},visibleSpecialLsit:{type:Array,default:function(){return[]}},onlySelfApartList:{type:Array,default:function(){return[]}},treeData:{type:Object,default:function(){return{}}},departInfo:{type:Object,default:function(){return{}}}},data:function(){return{visibleThere:!1,visibleSelf:!1}},methods:{switchPermission:function(e,t,i){e&&(this[i]=!e),this.visibleSelf?this.departInfo.type=2:this.visibleThere?this.departInfo.type=1:this.departInfo.type=""},callPerSelector:function(e,t){this.$emit("callPerSelector",e,t)}},mounted:function(){var e=this.departInfo.type;this.visibleThere=!(1!=e),this.visibleSelf=!(2!=e)},watch:{departInfo:{handler:function(e,t){var i=e.type;this.visibleThere=!(1!=i),this.visibleSelf=!(2!=i)},deep:!0}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"jurisdiction-setting"},[i("div",{staticClass:"only-visivble-there permission-div"},[i("div",{staticClass:"permission-div-title"},[i("span",[e._v("本部门员工仅可见本部门员工")]),e._v(" "),i("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(t){e.switchPermission(e.visibleThere,"visibleThere","visibleSelf")}},model:{value:e.visibleThere,callback:function(t){e.visibleThere=t},expression:"visibleThere"}})],1),e._v(" "),e.visibleThere?i("div",{staticClass:"particular-setting"},[i("select-area",{attrs:{treeData:e.treeData,butList:e.butList,specialList:e.specialList},on:{callPerSelector:e.callPerSelector}})],1):e._e()]),e._v(" "),i("div",{staticClass:"only-visivble-self permission-div"},[i("div",{staticClass:"permission-div-title"},[i("span",[e._v("本部门员工仅可见自己")]),e._v(" "),i("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(t){e.switchPermission(e.visibleSelf,"visibleSelf","visibleThere")}},model:{value:e.visibleSelf,callback:function(t){e.visibleSelf=t},expression:"visibleSelf"}})],1),e._v(" "),e.visibleSelf?i("div",{staticClass:"particular-setting"},[i("select-area",{attrs:{treeData:e.treeData,butList:e.selfButList,specialList:e.selfSpecialList},on:{callPerSelector:e.callPerSelector}})],1):e._e()])])},staticRenderFns:[]};var c=i("VU/8")(l,o,!1,function(e){i("wVEX")},null,null);t.a=c.exports},q5Ri:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("n7j5"),s=i("c4uw"),n=i("P9l9"),r={name:"addDepartment",components:{permissionSetting:a.a,vueSelectEmployee:s.a},data:function(){return{departInfo:{name:"",parentName:"",parentId:""},testList:[],treeSet:{isSelectPerson:!1,dialogVisible:!1,isSingle:!0},rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],parentId:[{required:!0,message:"请选择父级部门",trigger:"change"}]},treeData:{},disabled:!0,defaultSelection:[],defaultParent:[],selectorType:"parent",changed:"parent",onlyPerson:!1,onlyGroup:[]}},methods:{getDepartInfo:function(){var e=this,t={groupId:e.$route.query.departmentId};Object(n.a)("/haoban-manage-web/dept/findDeptById",t).then(function(t){if(1==t.data.errorCode){e.departInfo.name=t.data.result.name,e.departInfo.parentId=t.data.result.parentId;var i=t.data.result.chainName.split("/"),a=i.length;e.departInfo.parentName=1==a?"":i[a-2],e.defaultParent=[{label:e.departInfo.parentName,id:t.data.result.parentId,groupId:t.data.result.parentId}]}else e.$message.error({duration:1e3,message:t.data.message})}).catch(function(t){e.$message.error({duration:1e3,message:t.message})})},callGroupSelector:function(){this.selectorType="parent",this.defaultSelection=this.defaultParent,this.onlyPerson=!1,this.onlyGroup=[],this.changed="parent",this.treeSet={dialogVisible:!0,isSingle:!0,isSelectPerson:!1}},callPerSelector:function(e,t){this.selectorType=e,this.defaultSelection=t,this.onlyPerson=!0,this.onlyGroup=[this.$route.query.departmentId],this.changed=e,this.treeSet={dialogVisible:!0,isSingle:!1,isSelectPerson:!0}},handleSelectedList:function(e){this.departInfo.parentId=e?e.id:"",this.departInfo.parentName=e?e.label:""},saveEdit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$refs.departForm.validate(function(i){if(!i)return!1;var a=e,s={parentId:a.departInfo.parentId,name:a.departInfo.name};Object(n.a)("/haoban-manage-web/dept/insert",s).then(function(e){1==e.data.errorCode?(a.$message.success({duration:1e3,message:"操作成功！"}),"continue"==t?(a.departInfo={name:"",parentName:"",parentId:""},a.disabled=!0,a.getGroupData()):window.history.go(-1)):a.$message.error({duration:1e3,message:e.data.message})}).catch(function(e){a.$message.error({duration:1e3,message:e.message})})})},getGroupData:function(){var e=this;Object(n.a)("/haoban-manage-web/dept/deptListForCompany",{isStoreGroup:0}).then(function(t){var i=[],a=[];1==t.data.errorCode&&(i=t.data.result.departmentList||[],a=t.data.result.searchList||[]),e.treeData={treeData:i,personData:a},e.disabled=!1}).catch(function(e){})},cancel:function(){this.$confirm(" 是否确认取消，取消后当前页面信息将丢失 ？","提示",{type:"warning"}).then(function(){window.history.go(-1)}).catch(function(e){})}},beforeMount:function(){this.getGroupData(),this.isAddNew||this.getDepartInfo()},computed:{isAddNew:function(){return!(1!=this.$route.query.addnew)}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-department-container"},[i("div",{staticClass:"setting-cell depart-info"},[i("p",{staticClass:"title"},[e._v("部门信息")]),e._v(" "),i("el-form",{ref:"departForm",staticClass:"department-info-form",attrs:{"label-position":"right",rules:e.rules,model:e.departInfo,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[i("el-input",{model:{value:e.departInfo.name,callback:function(t){e.$set(e.departInfo,"name",t)},expression:"departInfo.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"部门排序调整",prop:"parentId"}},[i("el-input",{attrs:{disabled:e.disabled,"suffix-icon":"el-icon-arrow-down"},on:{focus:e.callGroupSelector},model:{value:e.departInfo.parentName,callback:function(t){e.$set(e.departInfo,"parentName",t)},expression:"departInfo.parentName"}})],1)],1)],1),e._v(" "),i("vue-select-employee",{attrs:{defaultSelection:e.defaultSelection,treeSet:e.treeSet,treeData:e.treeData},on:{handleSelectedList:e.handleSelectedList}})],1)},staticRenderFns:[]};var o=i("VU/8")(r,l,!1,function(e){i("e8iM")},null,null);t.default=o.exports},wVEX:function(e,t){}});