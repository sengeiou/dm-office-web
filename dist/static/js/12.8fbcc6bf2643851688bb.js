webpackJsonp([12],{"5gt+":function(e,t,i){"use strict";var a=i("mvHQ"),s=i.n(a),l=i("//Fk"),o=i.n(l),n=i("DAYN"),r={name:"vue-office-upload-image",props:{projectName:{type:String,default:"haoban-manage-web"},wxFlag:{type:String,default:"1"},imgRate:{type:String},actionUrl:{type:String,default:""},maxImageLength:{type:Number,default:5},limitW:{type:Number},limitH:{type:Number},imageList:{type:Array,default:function(){return[]}}},data:function(){return{dragImageList:this.imageList,initialImg:0,progress:0,pass:null,isEnlargeImage:!1,enlargeImage:""}},computed:{propStatus:function(){return this.pass?"success":!1===this.pass?"exception":"text"}},beforeMount:function(){},methods:{uploadUrl:function(){var e,t=window.location.origin,i=void 0;return e=this.wxFlag&&""!=this.wxFlag?"wxFlag="+this.wxFlag+"&":"",i="-1"!=t.indexOf("localhost")?"http://www.gicdev.com":t,this.upUrl=i+this.actionUrl+"?"+e+"requestProject="+this.projectName,this.upUrl},beforeAvatarUpload:function(e){var t=this,i=("image/jpeg"===e.type||"image/jpg"===e.type||e.type,e.size/1024/1024<2);return i||t.$message.error("上传图片大小不能超过 2MB!"),i&&new o.a(function(i,a){var s=new FileReader;s.onload=function(e){var s=new Image;s.onload=function(){var e=this.width,s=this.height;t.imgRate&&""!==t.imgRate&&(Number(t.imgRate.split(":")[0])/Number(t.imgRate.split(":")[1])!=Number(e)/Number(s)&&(t.$message.error("上传图片比例不正确!"),a()));t.imgRate&&""!=t.imgRate||!t.limitW||!t.limitH||e===t.limitW||s===t.limitH||(t.$message.error("上传图片尺寸不正确!"),a()),i()},s.src=e.target.result},s.readAsDataURL(e)})},uploadOnSuccess:function(e,t){this.pass=!0,1==e.errorCode?(this.$message.success("上传成功"),this.$emit("uploadOnSuccess",{res:e,file:t},this.imageList)):this.$message.error(e.message)},uploadOnProgress:function(e,t){e&&e.percent&&(this.progress=Math.floor(e.percent))},uploadOnChange:function(e){"ready"===e.status?(this.pass=null,this.progress=0):"fail"===e.status&&this.$message.error("图片上传失败，请重试！")},uploadOnError:function(){},previewImage:function(e){this.isEnlargeImage=!0,this.initialImg=e},deleteImage:function(e){this.$emit("deleteImage",e);var t=JSON.parse(s()(this.imageList));t.splice(e,1),this.$emit("update:imageList",t)},handleClose:function(e){e()},itemMoveEnd:function(e){this.$emit("sortImg",this.dragImageList),this.$emit("update:imageList",this.dragImageList)}},watch:{imageList:function(e,t){this.dragImageList=e}},mounted:function(){},components:{draggable:i.n(n).a}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gic-upload__img"},[i("div",{staticClass:"gic-upload__img__drag"},[i("draggable",{staticClass:"drag-wrap",staticStyle:{display:"contents"},attrs:{options:{group:{name:"people",pull:!1,put:!0},sort:!0}},on:{end:e.itemMoveEnd},model:{value:e.dragImageList,callback:function(t){e.dragImageList=t},expression:"dragImageList"}},[i("transition-group",{attrs:{name:"slide-fade"}},e._l(e.imageList,function(t,a){return i("div",{key:a,class:["img-content",a>=6?"m-t-8":""]},[i("a",{staticClass:"item-img",attrs:{href:t.url}},[i("img",{attrs:{src:t.url,alt:"上传图片"}})]),e._v(" "),i("div",{staticClass:"upload-icon__btn"},[i("i",{staticClass:"el-icon-view",on:{click:function(t){e.previewImage(a)}}}),e._v(" "),i("i",{staticClass:"el-icon-delete",on:{click:function(t){e.deleteImage(a)}}})])])}))],1),e._v(" "),e.pass||0===e.progress?e._e():i("div",{class:["img-content","img-progress",e.imageList.length>=6?"m-t-8":""]},[i("el-progress",{staticClass:"gic-img-progress",staticStyle:{"line-height":"102px"},attrs:{width:102,percentage:e.progress,status:e.propStatus}})],1),e._v(" "),e.imageList&&e.imageList.length<e.maxImageLength?i("div",{class:["img-upload",e.imageList.length>=6?"m-t-8":""]},[i("el-upload",{staticClass:"loader",attrs:{accept:"image/jpg,image/jpeg,image/png,image/gif",action:e.uploadUrl(),"list-type":"picture-card","on-change":e.uploadOnChange,"before-upload":e.beforeAvatarUpload,"on-success":e.uploadOnSuccess,"on-error":e.uploadOnError,"on-progress":e.uploadOnProgress}},[i("i",{staticClass:"el-icon-plus gic-upload-btn"})])],1):e._e()],1),e._v(" "),i("el-dialog",{attrs:{title:"图片预览",visible:e.isEnlargeImage,"modal-append-to-body":!1,"before-close":e.handleClose,width:"520px"},on:{"update:visible":function(t){e.isEnlargeImage=t}}},[e.isEnlargeImage?i("el-carousel",{attrs:{trigger:"click","initial-index":e.initialImg,autoplay:!1,height:"500px"}},e._l(e.imageList,function(t,a){return i("el-carousel-item",{key:a,staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[i("img",{staticStyle:{"max-width":"480px","max-height":"500px"},attrs:{src:t.url},on:{click:function(t){e.isEnlargeImage=!1}}})])})):e._e()],1)],1)},staticRenderFns:[]};var f=i("VU/8")(r,d,!1,function(e){i("FKG6")},null,null);t.a=f.exports},"67iC":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("3Xzz"),s=i("P9l9"),l=i("0xDb"),o=i("KzHU"),n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editable-cell-container"},[i("div",{staticClass:"title-div"},[i("span",{staticClass:"font-w-500"},[e._v(e._s(e.title))]),e._v(" "),i("div",{staticClass:"hurdle"}),e._v(" "),i("a",{staticClass:"a-href",on:{click:function(t){e.showEdit=!0}}},[e._v("编辑")])]),e._v(" "),i("el-form",{ref:"cell_form",staticClass:"info-form record-edit-rorm",attrs:{rules:e.rules,inline:"","label-width":"150px",model:e.fieldsInfo}},[e._l(e.fieldList,function(t,a){return[i("el-form-item",{key:t.fieldCode+"_"+a,staticClass:"item-width",attrs:{label:t.title+"：",prop:t.fieldCode}},[e.showEdit?[0==t.fieldType?i("el-input",{attrs:{placeholder:t.fieldDescription,disabled:"1"!=t.fieldEdited},model:{value:e.fieldsInfo[t.fieldCode],callback:function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},expression:"fieldsInfo[item.fieldCode]"}}):e._e(),e._v(" "),6==t.fieldType?i("el-input",{attrs:{placeholder:t.fieldDescription,disabled:"1"!=t.fieldEdited},model:{value:e.fieldsInfo[t.fieldCode],callback:function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},expression:"fieldsInfo[item.fieldCode]"}}):1==t.fieldType?i("el-input",{attrs:{type:"textarea",autosize:"",disabled:"1"!=t.fieldEdited},model:{value:e.fieldsInfo[t.fieldCode],callback:function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},expression:"fieldsInfo[item.fieldCode]"}}):2==t.fieldType||3==t.fieldType?[1==t.systemFlag?i("el-select",{attrs:{disabled:"1"!=t.fieldEdited||"clerkStatus"==t.fieldCode&&3==e.fieldsInfo[t.fieldCode],multiple:3==t.fieldType,"collapse-tags":3==t.fieldType,placeholder:t.fieldDescription},model:{value:e.fieldsInfo[t.fieldCode],callback:function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},expression:"fieldsInfo[item.fieldCode]"}},e._l(t.fieldOperations.fieldContent,function(e){return i("el-option",{key:e.key,attrs:{label:e.name,value:e.key,disabled:"clerkStatus"==t.fieldCode&&3==e.key}})})):i("el-select",{attrs:{disabled:"1"!=t.fieldEdited,multiple:3==t.fieldType,"collapse-tags":3==t.fieldType,placeholder:t.fieldDescription},model:{value:e.fieldsInfo[t.fieldCode],callback:function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},expression:"fieldsInfo[item.fieldCode]"}},e._l(t.fieldOperations.fieldContent,function(e,t){return i("el-option",{key:e.key+"_"+t,attrs:{label:e.name,value:e.name}})}))]:4==t.fieldType?i("el-date-picker",{attrs:{type:"date",disabled:"1"!=t.fieldEdited,format:t.fieldOperations.typeValue,"value-format":t.fieldOperations.typeValue,placeholder:t.fieldDescription},model:{value:e.fieldsInfo[t.fieldCode],callback:function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},expression:"fieldsInfo[item.fieldCode]"}}):5==t.fieldType?i("el-date-picker",{attrs:{type:"daterange","range-separator":"至",disabled:"1"!=t.fieldEdited,format:t.fieldOperations.typeValue,"value-format":t.fieldOperations.typeValue,"start-placeholder":t.fieldOperations.startDescription,"end-placeholder":t.fieldOperations.endDescription},model:{value:e.fieldsInfo[t.fieldCode],callback:function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},expression:"fieldsInfo[item.fieldCode]"}}):7==t.fieldType?i("uploadImage",{attrs:{projectName:"haoban-manage-web",wxFlag:"0",actionUrl:e.uploadUrl,imageList:e.fieldsInfo[t.fieldCode],maxImageLength:3},on:{"update:imageList":function(i){e.$set(e.fieldsInfo,t.fieldCode,i)},uploadOnSuccess:e.uploadOnSuccess,sortImg:e.sortImg,deleteImage:e.deleteImage}}):e._e()]:[0==t.fieldType||1==t.fieldType||6==t.fieldType?i("div",{staticClass:"field-value color-606266"},[e._v("\n            "+e._s(e.fieldsInfo[t.fieldCode])+"\n          ")]):2==t.fieldType?[1==t.systemFlag?i("div",{staticClass:"field-value color-606266"},[e._v("\n              "+e._s(t.fieldOperations.fieldContent[1*e.fieldsInfo[t.fieldCode]-1]?t.fieldOperations.fieldContent[1*e.fieldsInfo[t.fieldCode]-1].name:""!==e.fieldsInfo[t.fieldCode]&&null!==e.fieldsInfo[t.fieldCode]&&t.fieldOperations.fieldContent.length?t.fieldOperations.fieldContent[t.fieldOperations.fieldContent.length-1].name:"")+"\n            ")]):i("div",{staticClass:"field-value color-606266"},[e._v(e._s(e.fieldsInfo[t.fieldCode]))])]:3==t.fieldType?i("div",{staticClass:"field-value color-606266"}):4==t.fieldType?i("div",{staticClass:"field-value color-606266"},[e._v("\n            "+e._s(e._f("formatDate")(e.fieldsInfo[t.fieldCode],t.fieldOperations.typeValue))+"\n          ")]):5==t.fieldType?i("div",{staticClass:"field-value color-606266"},[e._v("\n            "+e._s(e.fieldsInfo[t.fieldCode].join("至"))+"\n          ")]):7==t.fieldType?i("div",{staticClass:"img-box"},e._l(e.fieldsInfo[t.fieldCode],function(e,t){return i("div",{key:t+e.url,staticClass:"item-imgs"},[i("a",[i("img",{attrs:{src:e.url}})])])})):e._e()]],2)]})],2),e._v(" "),e.showEdit?i("div",{staticClass:"handle-form-btns t-ct m-b-60"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:e.cancelEdit}},[e._v("取消")])],1):e._e()],1)},staticRenderFns:[]};var r=function(e){i("c7WX")},d=i("VU/8")(o.a,n,!1,r,null,null).exports,f=i("IVno"),c={name:"recordInfo",components:{navCrumb:a.a,editableCell:d,handleDialog:f.a},filters:{formatDate:l.b},data:function(){return{windowH:window.screen.availHeight-180+"px",navpath:[{name:"首页",path:"/index"},{name:"通讯录",path:"/administrativeFrame"},{name:"员工档案",path:"/fileSet"},{name:"在职员工",path:"/employeeRecord"},{name:"编辑员工信息",path:""}],editNavpath:[{name:"首页",path:"/index"},{name:"通讯录",path:"/administrativeFrame"},{name:"员工档案",path:"/fileSet"},{name:"离职员工",path:"/unemployee"},{name:"编辑员工信息",path:""}],dialogVisible:!1,htmlTitle:"员工档案",info:{},staticInfo:{},statusList:["正式","试用","离职"],reasons:["","家庭原因","个人原因","发展原因","合同到期不续签","协议解除","无法胜任工作","经济性裁员","严重违法违纪","其他"],items:[],fieldList:[],mileStone:[],historyStatus:["新入职","转正","离职","转岗","再入职"],editHisObj:{}}},methods:{handleSuccess:function(){this.dialogVisible=!1},getEmployeeDetail:function(){var e=this,t={recordId:e.$route.query.recordId};Object(s.a)("/haoban-manage-web/record/employee-detail",t).then(function(t){1==t.data.errorCode?e.getTemplate(t.data.result):e.$message.error({message:t.data.message})}).catch(function(t){e.$message.error({message:t.message})})},subSuccess:function(){this.getEmployeeDetail()},getTemplate:function(e){var t=this;Object(s.a)("/haoban-manage-web/record/employee-find-template",{}).then(function(i){1==i.data.errorCode?t.formatTemplateList(i.data.result,e):t.$message.error({message:i.data.message})}).catch(function(e){t.$message.error({message:e.message})})},formatTemplateList:function(e,t){var i=[],a=e,s=JSON.parse(t.defineString),o=Object(l.a)(t);for(var n in s)o[n]=s[n];e.forEach(function(e){if(0!=e.parentCode&&(e.fieldOperations=JSON.parse(e.fieldOperations)),5==e.fieldType&&(o[e.fieldCode]=o[e.fieldCode]?o[e.fieldCode].split(","):["",""],t[e.fieldCode]=t[e.fieldCode]?t[e.fieldCode].split(","):["",""]),e.fieldType,7==e.fieldType){var s=[];o[e.fieldCode]=o[e.fieldCode]?o[e.fieldCode].split(","):[],o[e.fieldCode].forEach(function(e){s.push({url:e})}),t[e.fieldCode]=s,o[e.fieldCode]=s.slice(0)}e.title=e.fieldName;var l=[];a.forEach(function(t){t.parentCode==e.fieldCode&&l.push(t)}),l.sort(function(e,t){return 1*e.sort-1*t.sort}),l.length>0&&(e.childrens=l),0==e.parentCode&&i.push(e)}),i.sort(function(e,t){return 1*e.sort-1*t.sort}),this.fieldList=i,this.info=o,this.staticInfo=t},getHistoryList:function(){var e=this,t={recordId:e.$route.query.recordId};Object(s.a)("/haoban-manage-web/record/history-record-list",t).then(function(t){if(1==t.data.errorCode){var i=t.data.result;e.formatMileStone(i)}else e.$message({message:t.data.message})}).catch(function(t){e.$message({message:t.message})})},formatMileStone:function(e){e.sort(function(e,t){return 1*e.historyDate-1*t.historyDate});for(var t=[],i=0,a=e.length;i<a;i+=4)t.push(e.slice(i,i+4));this.mileStone=t},editHis:function(e){this.editHisObj.historyId=e.historyId,this.editHisObj.recordId=this.$route.query.recordId,this.dialogVisible=!0}},beforeMount:function(){this.getEmployeeDetail(),this.getHistoryList()},mounted:function(){var e=this.$route.query.type;e&&"unemployee"==e&&(this.navpath=this.editNavpath),this.$nextTick(function(){document.querySelector(".contact-wrap__body").style.overflow="auto",document.querySelector(".contact-wrap__body").removeAttribute("style"),document.getElementsByClassName("contact-wrap__right")[0].removeAttribute("style")})},beforeDestroy:function(){document.querySelector(".contact-wrap__body").style.overflow="hidden";var e=(document.documentElement.clientHeight||document.body.clientHeight)-64+"px";document.querySelector(".contact-wrap__body").setAttribute("style","height:"+e),document.getElementsByClassName("contact-wrap__right")[0].setAttribute("style","height:"+e)}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"common-set-wrap",style:{"min-height":e.windowH}},[i("nav-crumb",{attrs:{navpath:e.navpath}}),e._v(" "),i("div",{staticClass:"right-content"},[i("div",{staticClass:"right-box"},[i("div",{staticClass:"commom-container clerk-detail-container"},[i("p",{staticClass:"t-rt"},[i("a",{staticClass:"a-href font-14",on:{click:function(t){e.getPdf()}}},[e._v("打印员工档案")])]),e._v(" "),i("div",{style:{"min-height":e.windowH},attrs:{id:"pdfDom"}},[i("div",{staticClass:"employee-detail-cell"},[i("div",{staticClass:"head-info"},[i("p",{staticClass:"head-cell"},[e.info.headPic?i("img",{staticClass:"head-img",attrs:{src:e.info.headPic}}):i("span",{staticClass:"head-img-null"},[i("i",{staticClass:"iconfont icon-yewuduanmorentouxian"})])]),e._v(" "),i("p",{staticClass:"head-cell name"},[e._v("\n                "+e._s(e.info.clerkName)),i("span",[e._v(e._s("-1"==e.info.clerkStatus?"无状态":e.statusList[e.info.clerkStatus-1]))])]),e._v(" "),i("p",{staticClass:"head-cell c-303133"},[e._v(e._s(e.info.groupName)+e._s(e.info.positionName))]),e._v(" "),i("p",{staticClass:"head-cell color-606266"},[e._v("已在"+e._s(e.info.enterpriseName)+"工作了"+e._s(e.info.days)+"天")])])]),e._v(" "),e._l(e.fieldList,function(t){return[t.childrens?i("editable-cell",{key:t.fieldCode,attrs:{info:e.info,staticInfo:e.staticInfo,items:e.items,title:t.title,fieldList:t.childrens},on:{subSuccess:e.subSuccess}}):e._e()]}),e._v(" "),i("div",{staticClass:"mile-stone-container"},[e._m(0),e._v(" "),i("ul",{staticClass:"mile-stone"},e._l(e.mileStone,function(t,a){return i("li",{key:a,staticClass:"stone-group",class:a%2==0?"column":"column-reverse"},[4==t.length&&a!=e.mileStone.length-1?i("div",{staticClass:"column-hurdle"}):e._e(),e._v(" "),e._l(t,function(t,s){return i("div",{key:s,staticClass:"stone",class:a%2==1&&3==s||a%2==0&&0==s&&0!=a?"no-radio":""},[i("p",{staticClass:"time"},[e._v(e._s(e._f("formatDate")(t.historyDate,"YY-MM-DD")))]),e._v(" "),e._m(1,!0),e._v(" "),i("p",{staticClass:"position"},[e._v(e._s(t.positionName))]),e._v(" "),i("p",{staticClass:"font-16 "},[e._v(e._s(e.historyStatus[1*t.historyStatus-1])),3==t.historyStatus?i("a",{staticClass:"a-href m-l-10 fs-12",on:{click:function(i){e.editHis(t)}}},[e._v("编辑")]):e._e()]),e._v(" "),3==t.historyStatus?i("p",[e._v("离职理由："+e._s(e.reasons[t.fireReason]))]):e._e(),e._v(" "),i("p",{staticClass:"color-606266"},[e._v(e._s(t.storeName?t.storeName:t.groupName))])])})],2)}))])],2),e._v(" "),i("el-dialog",{attrs:{title:"修改离职信息",visible:e.dialogVisible,width:"480px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("handle-dialog",{attrs:{employee:e.editHisObj,handleType:"changeFireInfo",typeTitle:"修改离职信息"},on:{handleSuccess:e.handleSuccess}})],1)],1)])]),e._v(" "),i("vue-gic-footer")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"m-s-title"},[t("span",{staticClass:"font-w-500"},[this._v("员工记录")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hurdle-box"},[t("span",{staticClass:"radio"}),this._v(" "),t("div",{staticClass:"hurdle"})])}]};var _=i("VU/8")(c,u,!1,function(e){i("J26u")},null,null);t.default=_.exports},FKG6:function(e,t){},J26u:function(e,t){},KzHU:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__=__webpack_require__("pFYg"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_2_components_employeeRecord_uploadImage__=__webpack_require__("5gt+"),__WEBPACK_IMPORTED_MODULE_3__utils_index__=__webpack_require__("0xDb"),__WEBPACK_IMPORTED_MODULE_4__api_api__=__webpack_require__("P9l9");__webpack_exports__.a={name:"editableCell",props:{info:{type:Object,required:!0},staticInfo:{type:Object,required:!0},items:{type:Array,required:!0},title:{type:String,default:""},fieldList:{type:Array,required:!0}},components:{uploadImage:__WEBPACK_IMPORTED_MODULE_2_components_employeeRecord_uploadImage__.a},filters:{formatDate:__WEBPACK_IMPORTED_MODULE_3__utils_index__.b},data:function(){return{showEdit:!1,uploadUrl:"/haoban-manage-web/upload-img",fieldsInfo:{}}},methods:{uploadOnSuccess:function(e,t){e.file.url=e.res.result[0].qcloudImageUrl,t.push(e.file)},deleteImage:function(e){this.imageList=this.imageList?this.imageList:[],this.imageList.splice(e,1)},sortImg:function(e){this.imageList=e},saveEdit:function saveEdit(){var that=this;that.$refs.cell_form.validate(function(valid){if(valid){var newInfo=Object(__WEBPACK_IMPORTED_MODULE_3__utils_index__.a)(that.fieldsInfo),params={},regFlag=[],fieldList=that.fieldList,objToString=[];if(fieldList.forEach(function(field){if(params[field.fieldCode]=newInfo[field.fieldCode],5==field.fieldType&&(params[field.fieldCode]=newInfo[field.fieldCode].join(",")),7==field.fieldType){var arr=[];newInfo[field.fieldCode].forEach(function(e){arr.push(e.url)}),params[field.fieldCode]=arr.join(",")}if(1!=field.systemFlag){if(objToString.push({fieldCode:field.fieldCode,fieldValue:newInfo[field.fieldCode]}),5==field.fieldType&&objToString.push({fieldCode:field.fieldCode,fieldValue:newInfo[field.fieldCode].join(",")}),7==field.fieldType){var _arr=[];newInfo[field.fieldCode].forEach(function(e){_arr.push(e.url)}),objToString.push({fieldCode:field.fieldCode,fieldValue:_arr.join(",")})}delete params[field.fieldCode]}field.regular&&""!==newInfo[field.fieldCode]&&regFlag.push(eval("/"+field.regular+"/").test(newInfo[field.fieldCode]))}),regFlag.length&&regFlag.includes(!1))return that.$message.error("请输入正确格式的字段值！"),!1;params.jsonString="[]"==__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(objToString)?"":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(objToString),params.recordId=that.$route.query.recordId,that.submitEdit(params)}})},submitEdit:function(e){var t=this;Object(__WEBPACK_IMPORTED_MODULE_4__api_api__.a)("/haoban-manage-web/record/save-record-detail",e).then(function(e){1==e.data.errorCode?(t.showEdit=!1,t.$emit("subSuccess"),t.$message({message:e.data.message,type:"success"})):t.$message.error(e.data.message)}).catch(function(e){t.$message.error(e.message)})},cancelEdit:function(){this.showEdit=!1,this.$refs.cell_form.clearValidate();var e=this.fieldsInfo,t=this.staticInfo;for(var i in e)e[i]=t[i]}},computed:{defineObj:function(){return JSON.parse(this.clerkInfo.defineString)},rules:function(){var e={},t=function(e,t,i){if(t){return/^[0-9]*$/.test(1*t)?i():i(new Error("请输入数字!"))}return i()};return this.fieldList.forEach(function(i){var a=[];0!=i.fieldType&&1!=i.fieldType||(i.minCount&&i.maxCount&&a.push({min:i.minCount,message:"至少填写"+i.minCount+"个字符",trigger:"change"}),!i.minCount&&i.maxCount&&a.push({max:i.maxCount,message:"至多填写"+i.maxCount+"个字符",trigger:"change"}),i.minCount&&i.maxCount&&a.push({min:i.minCount,max:i.maxCount,message:"长度在 "+i.minCount+" 到 "+i.maxCount+"个字符",trigger:"change"})),6==i.fieldType&&"identifyNo"!=i.fieldCode&&a.push({validator:t,message:i.fieldName+"必须为数字",trigger:"change"}),e[i.fieldCode]=a}),e}},beforeMount:function(){var e=JSON.parse(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(this.info));for(var t in e)e[t]=null==e[t]?"":"object"===__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(e[t])?e[t]:String(e[t]);this.fieldsInfo=e}}},c7WX:function(e,t){}});