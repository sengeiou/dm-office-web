webpackJsonp([33],{AKQg:function(t,e){},cK0D:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("2eFk"),n=a("Ke24"),i=a("nsZK"),r=a("P9l9"),s=a("PI0u"),l=a("Ch4/"),c={name:"reviewed",props:{brandId:{type:String,default:function(){return""}},activeGroupId:{type:String,default:function(){return""}}},data:function(){return{tableH:window.screen.availHeight-464-126,activeTab:"1",activeBrand:this.brandId,activeGroup:this.activeGroupId,activeId:"2",topMenuData:[{id:"1",name:"指标管理",path:"/monthList?appIcon="+this.$route.query.appIcon},{id:"2",name:"月指标任务",path:""}],showDialog:!1,conditionObj:{searchInput:"",storeGroupIds:[],storeStatus:"",dateRange:[]},storeStatusOptions:[{value:"",label:"所有门店状态"},{value:"0",label:"待审核"},{value:"1",label:"正常"},{value:"2",label:"审核失败"},{value:"3",label:"停业整顿"},{value:"4",label:"回收站"},{value:"5",label:"删除"}],selectRadio:0,tableData:[],currentPage:1,pageSize:20,total:0,appScene:2,defaultStoreList:[],storeTreeSet:{isSelectPerson:!1,dialogVisible:!1,isSingle:!1},loading:!1}},computed:{},methods:{handleCommand:function(t){this.selectRadio=t},setSelectTab:function(t){this.activeTab=t.tabId},toInput:Object(s.a)(function(t,e){this.currentPage=1,this.getTableList()},500),checkStoreGroupIds:function(t){this.currentPage=1,this.conditionObj.storeGroupIds=t,this.getTableList()},changeStoreStatus:function(){this.currentPage=1,this.getTableList()},changeDate:function(t){t||(this.conditionObj.dateRange=[]),this.currentPage=1,this.getTableList()},exportExcel:function(){var t=this,e={keyword:t.conditionObj.searchInput,storeGroupIds:t.conditionObj.storeGroupIds.map(function(t){return t.groupId}).join(",")||"",storeStatus:t.conditionObj.storeStatus,startDate:t.conditionObj.dateRange?t.conditionObj.dateRange[0]:"",endDate:t.conditionObj.dateRange?t.conditionObj.dateRange[1]:"",brandId:t.activeBrand};Object(r.b)("/haoban-app-performance-web/performance/export-store-month-performance-task",e).then(function(t){if(!t.data)return l.a.errorMsg("暂无数据"),!1;var e=new Blob([t.data],{type:"application/vnd.ms-excel"}),a=document.createElement("a");a.download="store-month-performance-task.xls",a.style.display="none",a.href=URL.createObjectURL(e),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}).catch(function(e){t.$message.error({duration:1e3,message:e.message})})},handleSizeChange:function(t){this.pageSize=t,this.getTableList()},handleCurrentChange:function(t){this.currentPage=t,this.getTableList()},toDetail:function(t,e){var a="",o="";this.conditionObj.dateRange.length>0&&(a=this.conditionObj.dateRange[0],o=this.conditionObj.dateRange[1]),this.$router.push("monthTaskDetail?storeId="+e.storeId+"&startDate="+a+"&endDate="+o+"&appIcon="+this.$route.query.appIcon)},getTableList:function(t){var e=this;e.loading=!0;var a={keyword:e.conditionObj.searchInput||"",storeGroupIds:e.conditionObj.storeGroupIds.map(function(t){return t.groupId}).join(",")||"",storeStatus:e.conditionObj.storeStatus||"",startDate:e.conditionObj.dateRange[0]||"",endDate:e.conditionObj.dateRange[1]||"",pageNum:e.currentPage,pageSize:e.pageSize,brandId:e.activeBrand};Object(r.a)("/haoban-app-performance-web/performance/query-store-month-performance-task",a).then(function(t){var a=t.data;if(e.loading=!1,1==a.errorCode)return e.tableData=a.result.list||[],e.total=a.result.pageInfo.total,!1;l.a.errorMsg(a)}).catch(function(t){e.$message.error({duration:1e3,message:t.message})})}},watch:{brandId:function(t,e){t&&(this.activeBrand=t,this.getTableList())},activeGroupId:function(t,e){t&&(this.activeGroup=t)}},mounted:function(){document.documentElement.style.backgroundColor="#f0f2f5",this.$emit("showTab","13"),this.activeBrand=this.brandId,this.activeGroup=this.activeGroupId,this.brandId&&this.getTableList()},destroyed:function(){this.activeGroup="",document.documentElement.style.backgroundColor="#fff"},components:{appDetail:o.a,commonDetailTop:n.a,storeTreeSelect:i.a}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"daily-set-wrap common-right-wrap"},[a("common-detail-top",{attrs:{topMenuData:t.topMenuData,activeId:t.activeId}}),t._v(" "),a("div",{staticClass:"daily-set-content boder-box"},[a("div",{staticClass:"table-condition flex flex-space-between m-b-23"},[a("div",{staticClass:"table-condition-left"},[a("el-input",{staticClass:"w-264",staticStyle:{width:"264px"},attrs:{placeholder:"请输入门店名称/code"},nativeOn:{keyup:function(e){return a=e,t.toInput(a,t.conditionObj.searchInput);var a}},model:{value:t.conditionObj.searchInput,callback:function(e){t.$set(t.conditionObj,"searchInput",e)},expression:"conditionObj.searchInput"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),a("el-select",{staticClass:"w-130 m-l-10",attrs:{placeholder:"请选择"},on:{change:t.changeStoreStatus},model:{value:t.conditionObj.storeStatus,callback:function(e){t.$set(t.conditionObj,"storeStatus",e)},expression:"conditionObj.storeStatus"}},t._l(t.storeStatusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("store-tree-select",{attrs:{brandId:t.brandId,activeGroupId:t.activeGroupId},on:{checkStoreGroupIds:t.checkStoreGroupIds}}),t._v(" "),a("el-date-picker",{staticClass:"m-l-10",staticStyle:{width:"310px"},attrs:{editable:!1,"value-format":"yyyy-MM",type:"monthrange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},on:{change:t.changeDate},model:{value:t.conditionObj.dateRange,callback:function(e){t.$set(t.conditionObj,"dateRange",e)},expression:"conditionObj.dateRange"}})],1),t._v(" "),a("div",{staticClass:"table-condition-right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[a("i",{staticClass:"iconfont icon-icon_yunxiazai p-r-6"}),t._v("导出")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"select-table",style:{width:"100%",minHeight:t.tableH},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"storeName",label:"门店名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskCount",label:"任务总数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"completedCount",label:"已完成(含放弃)","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"completedRate",label:"完成率(含放弃)","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"noCompletedCount",label:"待完成","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"overdueCount",label:"逾期中","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.toDetail(e.$index,e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),0!=t.tableData.length?a("div",{staticClass:"block common-wrap__page text-right m-t-24"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[20,40,60,80],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("AKQg")},"data-v-cbdb6fc6",null);e.default=u.exports}});