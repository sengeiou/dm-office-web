webpackJsonp([11],{"3zYh":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("fZjL"),i=r.n(a),s=r("BO1k"),n=r.n(s),o=r("woOf"),l=r.n(o),u=r("mvHQ"),c=r.n(u),d=r("3Xzz"),m=r("l46T"),p=r("//Fk"),g=r.n(p),f=r("Ch4/"),h={name:"single-upload",props:{imgSrc:{type:String,default:""},field:{type:String,default:""},uploadLimit:{type:Number,default:2}},data:function(){return{projectName:"",imgShowFlag:!1,imgUrl:""}},beforeMount:function(){var e=window.location.origin;-1!=e.indexOf("localhost")?this.baseUrl="http://www.gicdev.com":this.baseUrl=e},methods:{uploadUrl:function(){var e=window.location.origin,t=void 0;return t="-1"!=e.indexOf("localhost")?"http://www.gicdev.com":e,this.upUrl=t+"/haoban-manage-web/upload-img",this.upUrl},handleAvatarSuccess:function(e,t,r){1==e.errorCode?this.$emit("update:imgSrc",e.result[0].qcloudImageUrl):f.a.errorMsg(e)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type||"image/gif"===e.type||"image/bmp"===e.type,r=e.size/1024/1024<this.uploadLimit;return r||this.$message.error("上传头像图片大小不能超过 "+this.uploadLimit+"MB!"),t&&r&&new g.a(function(t,r){var a=new FileReader;a.onload=function(e){var r=new Image;r.onload=function(){this.width,this.height;t()},r.src=e.target.result},a.readAsDataURL(e)})},showImage:function(e){if(!e||""==e)return!1;this.imgShowFlag=!0,this.imgUrl=e},hideImage:function(e){this.imgShowFlag=e}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"single-upload-wrap"},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl(),"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imgSrc?r("img",{staticClass:"avatar",attrs:{src:e.imgSrc},on:{mouseover:function(t){e.showImage(e.imgSrc)}}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),"businessCard"==e.field?r("p",{staticClass:"upload-tip w-500"},[e._v("\n    上传营业执照复印件加盖公章，手写“仅用于好办认证”字样；照片搜索信息要求清晰可见，内容真实有效，不得做任何修改；支持jpp、jpeg、bmg、gif、png格式，大小不超过8M。\n  ")]):e._e(),e._v(" "),"cardUrl"==e.field?r("p",{staticClass:"upload-tip w-500"},[e._v("\n    支持jpg、jpeg、pdf、bmg、gif格式照片，大小不超过2M，只能上传一张，再次上传覆盖前一张\n  ")]):e._e(),e._v(" "),"authUrl"==e.field?r("p",{staticClass:"upload-tip w-500"},[e._v("点击可以"),r("a",{staticClass:"color-1890ff",attrs:{href:"https://other-1251519181.cos.ap-shanghai.myqcloud.com/doc/20190529092413/好办认证授权书.docx",download:"好办认证授权书.docx"}},[e._v("下载授权书")]),e._v("模板，支持jpg、jpeg、pdf、bmg、gif格式照片，大小不超过2M，只能上传一张，再次上传覆盖前一张")]):e._e(),e._v(" "),r("vue-gic-img-preview",{attrs:{imgUrl:e.imgUrl,imgShowFlag:e.imgShowFlag},on:{hideImage:e.hideImage}})],1)},staticRenderFns:[]};var b=r("VU/8")(h,v,!1,function(e){r("lcJy")},"data-v-7a69c9e0",null).exports,y=r("3E4D"),F=r("PI0u"),U=r("P9l9"),w={name:"companyCertify",data:function(){return{projectName:"haoban-manage-web",postUrl:"/haoban-manage-web/dict-district-list",navpath:[{name:"首页",path:"/index"},{name:"设置",path:"/companyAddress"},{name:"企业设置",path:"/companyAddress"},{name:"企业认证",path:""}],ruleForm:{enterpriseName:"",region:"",detailAddress:"",businessLicenseNum:"",cardType:"0",businessLicenseUrl:"",cardUrl:"",authUrl:"",authenticationStatus:0,refuseReason:""},rules:{enterpriseName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],detailAddress:[{required:!0,message:"请输入详细地址",trigger:"blur"}],businessLicenseNum:[{required:!0,message:"请输入营业执照注册号",trigger:"blur"}],region:[{required:!0,message:"请选择地区",trigger:"blur"}],cardType:[{required:!0,message:"请选择证件类型",trigger:"blur"}],businessLicenseUrl:[{required:!0,message:"请上传营业执照",trigger:"blur"}],cardUrl:[{required:!0,message:"请上传照片",trigger:"blur"}],authUrl:[{required:!0,message:"请上传授权书",trigger:"blur"}]},areaOptions:{provinceName:"",provinceId:"",cityName:"",cityId:"",countryName:"",countyId:""},baseUrl:""}},computed:{},beforeMount:function(){var e=window.location.origin;"-1"!=e.indexOf("localhost")?this.baseUrl="http://www.gicdev.com":this.baseUrl=e},methods:{selected:function(e){e.country?(this.ruleForm.region=e,this.ruleForm.areaId=e.areaIdl):this.ruleForm.region=""},submitForm:Object(F.a)(function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;var r=JSON.parse(c()(t.ruleForm));t.postSave(r,!0)})},500),postSave:function(e,t){var r=this,a={enterpriseName:e.enterpriseName,enterpriseCode:e.enterpriseCode,provinceId:e.region.province,cityId:e.region.city,areaId:e.region.areaId,detailAddress:e.detailAddress,cardType:e.cardType,cardUrl:e.cardUrl,businessLicenseUrl:e.businessLicenseUrl,businessLicenseNum:e.businessLicenseNum,authUrl:e.authUrl,saveOnly:t};Object(U.d)("/haoban-manage-web/enterprise-authentication/update-authentication",a).then(function(e){var a=e.data;if(1==a.errorCode)return y.a.showmsg("保存成功","success"),void(!1===t&&r.getCompanyInfo());f.a.errorMsg(a)}).catch(function(e){r.$message.error({duration:1e3,message:e.message})})},submitReview:Object(F.a)(function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;var r=JSON.parse(c()(t.ruleForm));t.postSave(r,!1)})},500),postReview:function(){},getCompanyInfo:function(){var e=this;Object(U.e)("/haoban-manage-web/enterprise-authentication/find-detail",{}).then(function(t){var r=t.data;if(1==r.errorCode){var a=!0,s=!1,o=void 0;try{for(var u,c=n()(i()(r.result));!(a=(u=c.next()).done);a=!0){var d=u.value;null!=r.result[d]&&"null"!=r.result[d]||(r.result[d]="")}}catch(e){s=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw o}}var m={provinceName:r.result.provinceName,provinceId:r.result.provinceId,cityName:r.result.cityName,cityId:r.result.cityId,countryName:r.result.areaName,countyId:r.result.areaId};return e.areaOptions=m,r.result.region=m,r.result.cardType=String(r.result.cardType),void(e.ruleForm=l()(e.ruleForm,r.result))}f.a.errorMsg(r)}).catch(function(t){e.$message.error({duration:1e3,message:t.message})})}},mounted:function(){this.getCompanyInfo()},components:{navCrumb:d.a,limitInput:m.a,singleUpload:b}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"companyCertify-wrap common-set-wrap"},[r("nav-crumb",{attrs:{navpath:e.navpath}}),e._v(" "),r("div",{staticClass:"right-content"},[r("div",{staticClass:"right-box"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"企业名称",prop:"enterpriseName"}},[r("limitInput",{attrs:{inputWidth:495,inputValue:e.ruleForm.enterpriseName,holder:"请输入企业名称",maxLength:20},on:{"update:inputValue":function(t){e.$set(e.ruleForm,"enterpriseName",t)}}})],1),e._v(" "),r("el-form-item",{staticClass:"city-area",attrs:{label:"所在地区",prop:"region"}},[r("vue-office-area",{attrs:{projectName:e.projectName,postUrl:e.postUrl,areaOptions:e.areaOptions},on:{selected:e.selected}})],1),e._v(" "),r("el-form-item",{attrs:{label:"详细地址",prop:"detailAddress"}},[r("limitInput",{attrs:{inputWidth:495,inputValue:e.ruleForm.detailAddress,holder:"请输入详细地址",maxLength:40},on:{"update:inputValue":function(t){e.$set(e.ruleForm,"detailAddress",t)}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"营业执照注册号",prop:"businessLicenseNum"}},[r("limitInput",{attrs:{inputWidth:495,inputValue:e.ruleForm.businessLicenseNum,holder:"请输入营业执照注册号",maxLength:20},on:{"update:inputValue":function(t){e.$set(e.ruleForm,"businessLicenseNum",t)}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"证件类型",prop:"cardType"}},[r("div",[r("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.cardType,callback:function(t){e.$set(e.ruleForm,"cardType",t)},expression:"ruleForm.cardType"}},[e._v("多证合一营业执照（原“注册号”字样，调整为18位的“统一社会信用代码”）")])],1),e._v(" "),r("div",[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.cardType,callback:function(t){e.$set(e.ruleForm,"cardType",t)},expression:"ruleForm.cardType"}},[e._v("普通营业执照（仍然标识为15位的“注册号”）")])],1)]),e._v(" "),r("el-form-item",{attrs:{label:"营业执照",prop:"businessLicenseUrl"}},[r("single-upload",{attrs:{imgSrc:e.ruleForm.businessLicenseUrl,uploadLimit:8,field:"businessCard"},on:{"update:imgSrc":function(t){e.$set(e.ruleForm,"businessLicenseUrl",t)}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手持证件照片",prop:"cardUrl"}},[r("single-upload",{attrs:{imgSrc:e.ruleForm.cardUrl,field:"cardUrl"},on:{"update:imgSrc":function(t){e.$set(e.ruleForm,"cardUrl",t)}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"授权书",prop:"authUrl"}},[r("single-upload",{attrs:{imgSrc:e.ruleForm.authUrl,field:"authUrl"},on:{"update:imgSrc":function(t){e.$set(e.ruleForm,"authUrl",t)}}})],1),e._v(" "),0!=e.ruleForm.authenticationStatus?r("el-form-item",{staticClass:"status-item",attrs:{label:"状态",prop:"status"}},[1==e.ruleForm.authenticationStatus?r("el-tag",[r("i",{staticClass:"el-icon-loading"}),e._v("审核中")]):e._e(),e._v(" "),2==e.ruleForm.authenticationStatus?r("el-tag",{attrs:{type:"success"}},[r("i",{staticClass:"el-icon-success"}),e._v("审核成功")]):e._e(),e._v(" "),3==e.ruleForm.authenticationStatus?r("el-tag",{attrs:{type:"danger"}},[r("i",{staticClass:"el-icon-error"}),e._v("审核失败")]):e._e(),3==e.ruleForm.authenticationStatus?r("span",{staticClass:"color-606266 error-text"},[e._v(e._s(e.ruleForm.refuseReason))]):e._e()],1):e._e(),e._v(" "),r("el-form-item",[r("el-button",{attrs:{disabled:0!=e.ruleForm.authenticationStatus&&3!=e.ruleForm.authenticationStatus,type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v(" 保 存 ")]),r("el-button",{attrs:{disabled:0!=e.ruleForm.authenticationStatus&&3!=e.ruleForm.authenticationStatus,type:"primary"},on:{click:function(t){e.submitReview("ruleForm")}}},[e._v("\n            提交审核\n          ")])],1)],1)],1)]),e._v(" "),r("vue-gic-footer")],1)},staticRenderFns:[]};var S=r("VU/8")(w,_,!1,function(e){r("NhM2")},"data-v-9a94ebf0",null);t.default=S.exports},BO1k:function(e,t,r){e.exports={default:r("fxRn"),__esModule:!0}},NhM2:function(e,t){},fxRn:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("g8Ux")},g8Ux:function(e,t,r){var a=r("77Pl"),i=r("3fs2");e.exports=r("FeBl").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},lcJy:function(e,t){}});