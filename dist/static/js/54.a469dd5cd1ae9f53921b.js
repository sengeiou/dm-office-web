webpackJsonp([54],{RHxA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),r=a("exGp"),o=a.n(r),n=a("3Xzz"),l=a("elmV"),c=a("P9l9"),p=a("unF8"),u=a("Ch4/"),d={name:"employee-io",components:{navCrumb:n.a,uploadExcelComponent:l.a},data:function(){var t=window.location.origin;return-1!=t.indexOf("localhost")&&(t="http://www.gicdev.com"),{navpath:[{name:"首页",path:"/index"},{name:"企业通讯录",path:"/administrativeFrame"},{name:"门店架构",path:"storeFrame"},{name:"批量导入导出",path:""}],host:window.location.origin,windowH:window.screen.availHeight-180+"px",type:"import",fileList:[],url:t+"/haoban-manage-web/store/upload",uploadSuccessMsg:"",logList:[],loading:!0,pageSize:20,currentPage:1,total:0,gicFlag:!0}},methods:{handleSizeChange:function(t){this.pageSize=t,this.getErrorNote()},handleCurrentChange:function(t){this.currentPage=t,this.getErrorNote()},resetList:function(t){this.fileList=[],"note"==t&&this.getErrorNote()},getErrorNote:function(){var t=this,e={departmentId:t.$route.query.departmentId,importCode:t.$route.query.importCode};Object(c.a)("/haoban-manage-web/error-log-page",e).then(function(e){1==e.data.errorCode?(t.total=e.data.result.totalCount,t.logList=e.data.result,t.loading=!1):t.$message.error({message:e.data.message})}).catch(function(e){t.$message.error({message:e.message})})},handleRemove:function(t,e){},handlePreview:function(t){},uploadSuccess:function(){1==res.errorCode?this.uploadSuccessMsg=res.message.split(","):this.$message.error(res.message),this.fileList=[],this.type="note",this.getErrorNote()},submitUpload:function(t){this.$refs[t].submit()},getChange:function(t,e){this.fileList=e},getGicData:function(t){var e=this;return o()(i.a.mark(function a(){var s,r,o,n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=e,r={type:1,businessId:t},a.next=4,Object(p.a)(r);case 4:o=a.sent,1==(n=o.data).errorCode?(s.gicFlag=n.result,s.type=n.result?"export":"import"):u.a.errorMsg(n);case 7:case"end":return a.stop()}},a,e)}))()}},beforeMount:function(){var t=this.$route.query.brandId;this.getGicData(t),"note"==this.type&&this.getErrorNote(),this.$nextTick(function(){document.querySelector(".contact-wrap__body").style.overflow="hidden"})},beforeDestroy:function(){document.querySelector(".contact-wrap__body").style.overflow="auto"}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-set-wrap",style:{height:t.windowH}},[a("nav-crumb",{attrs:{navpath:t.navpath}}),t._v(" "),a("div",{staticClass:"right-content"},[a("div",{staticClass:"right-box"},[a("div",{staticClass:"io-container border-box "},[t._m(0),t._v(" "),a("el-radio-group",{staticClass:"m-t-20",on:{change:t.resetList},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t.gicFlag?t._e():a("el-radio-button",{attrs:{label:"import"}},[t._v("导入门店")]),t._v(" "),a("el-radio-button",{attrs:{label:"export"}},[t._v("导出")]),t._v(" "),a("el-radio-button",{attrs:{label:"note"}},[t._v("错误记录")])],1),t._v(" "),"import"==t.type?a("div",{staticClass:"handle-area import"},[a("div",{staticClass:"step-div",staticStyle:{"margin-bottom":"90px","line-height":"32px"}},[a("span",{staticClass:"ft-large"},[t._v("①")]),t._v("下载门店导入模板，批量填写门店信息\n            "),a("a",{staticClass:"d-u-btn",attrs:{href:t.host+"/haoban-manage-web/excel/通讯录-门店架构导入模板.xlsx"}},[a("el-button",{attrs:{type:"primary"}},[t._v(" 下载"),a("i",{staticClass:"iconfont icon-icon_yunxiazai m-l-5"})])],1)]),t._v(" "),a("div",{staticClass:"step-div"},[a("span",{staticClass:"ft-large"},[t._v("②")]),t._v("上传填写好的门店信息\n            "),a("div",{staticClass:"d-u-btn"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.url+"?brandId="+t.$route.query.brandId,"on-success":t.uploadSuccess,"on-change":t.getChange,multiple:!1,"file-list":t.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("文件格式必须为xls或xlsx格式")])],1)],1)]),t._v(" "),a("div",{staticClass:"up-btn-div"},[a("el-button",{attrs:{type:"primary",disabled:0==t.fileList.length},on:{click:function(e){t.submitUpload("upload")}}},[t._v("\n              上传\n            ")])],1)]):"export"==t.type?a("div",{staticClass:"handle-area import"},[a("div",{staticClass:"step-div",staticStyle:{"margin-bottom":"90px","line-height":"32px"}},[a("span",{staticClass:"ft-large"},[t._v("①")]),t._v("导出门店\n            "),a("a",{staticClass:"d-u-btn",attrs:{href:"/haoban-manage-web/store/export?storeGroupId="+t.$route.query.departmentId+"&showChild="+t.$route.query.showChildMember}},[a("el-button",{attrs:{type:"primary"}},[t._v(" 下载"),a("i",{staticClass:"iconfont icon-icon_yunxiazai m-l-5"})])],1),t._v("\n            批量修改门店信息\n          ")])]):a("div",{staticClass:"error-log import"},[a("div",{staticClass:"title-area"},[a("div",{staticClass:"tip"},[t._v(t._s(t.uploadSuccessMsg))]),t._v(" "),a("a",{attrs:{href:"/haoban-manage-web/error-improt-log-export?importCode="+t.$route.query.importCode+"&departmentId="+t.$route.query.departmentId}},[a("el-button",{attrs:{type:"primary"}},[t._v("导出错误记录")])],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-t-20",staticStyle:{width:"100%"},attrs:{data:t.logList}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{label:"错误提示",prop:"failReason"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"手机号",prop:"phoneNumber"}}),t._v(" "),a("el-table-column",{attrs:{label:"部门ID",prop:"departmentId"}}),t._v(" "),a("el-table-column",{attrs:{label:"职位",prop:"positionName"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否此部门负责人（是/否）",prop:"isManager"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(1==e.row.isManager?"是":"否")+"\n              ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"入职时间",prop:"hireDate"}})],1),t._v(" "),t.logList.length?a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-sizes":[20,40,60,80],"page-size":t.pageSize,"current-page":t.currentPage,layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)],1)])]),t._v(" "),a("vue-gic-footer")],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tip-area border-box "},[a("li",{staticClass:"tip"},[t._v("由于你的企业未进行企业认证，最多导入30家门店，如有超出，可先进行"),a("a",{staticClass:"a-href",attrs:{href:"#/companyCertify"}},[t._v("企业认证")])]),t._v(" "),a("li",{staticClass:"tip"},[t._v("\n            由于数据量可能较大，每次最多导入2000条员工档案，若超过只取前2000条，可以分多次导入\n          ")]),t._v(" "),a("li",{staticClass:"tip"},[t._v("不能在本excel表中对门店信息类别进行增加、删除、修改")]),t._v(" "),a("li",{staticClass:"tip"},[t._v("标*字段为必填字段，未标*字段为选填字段")]),t._v(" "),a("li",{staticClass:"tip"},[t._v("\n            门店所在分组：请先到后台创建门店分组，将分组id填入导入表格中，导入中，若找不到对应分组，将直接将门店挂在根目录下面\n          ")]),t._v(" "),a("li",{staticClass:"tip"},[t._v("未认证企业通讯录最多只能导入30家门店，超出后无法导入，请先进行企业认证")]),t._v(" "),a("li",{staticClass:"tip"},[t._v("每次最多导入2000家门店，如果超出则只取前2000条数据，可以分多次导入")])])}]};var g=a("VU/8")(d,v,!1,function(t){a("vAXq")},null,null);e.default=g.exports},vAXq:function(t,e){}});