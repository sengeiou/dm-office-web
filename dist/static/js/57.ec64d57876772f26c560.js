webpackJsonp([57],{K4js:function(e,t){},jMbb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),o=a.n(n),i=a("Ke24"),l=a("LRn8"),s=a("P9l9"),r=a("Ch4/"),c=a("3E4D"),d={name:"reviewed",props:{brandId:{type:String,default:function(){return""}}},filters:{formatTimeYMD:function(e){return e&&"- -"!=e?e.split(" ")[0]:"--"},formatTimeHMS:function(e){return e&&"- -"!=e?e.split(" ")[1]:"--"}},data:function(){return{tableH:window.screen.availHeight-464-126,activeId:"3",activeBrand:this.brandId,topMenuData:[{id:"1",name:"指标管理",path:"/monthList?appIcon="+this.$route.query.appIcon},{id:"2",name:"月指标任务",path:"/monthTask?appIcon="+this.$route.query.appIcon},{id:"3",name:"月指标任务详情",path:""}],selectRadio:0,showDialog:!1,conditionObj:{isCompleted:"",isOverTime:"",dateRange:[]},completedOptions:[{label:"完成情况",value:""},{label:"已完成",value:"1"},{label:"未完成",value:"0"}],overOptions:[{label:"逾期情况",value:""},{label:"已逾期",value:"1"},{label:"未逾期",value:"0"}],tableData:[],multipleSelection:[],dialogVisible:!1,currentPage:1,pageSize:20,total:0}},computed:{},methods:{init:function(){var e=this.$route.query.startDate,t=this.$route.query.endDate;document.documentElement.style.backgroundColor="#f0f2f5",this.$emit("showTab","13"),this.activeBrand=this.brandId,this.conditionObj.storeId=this.$route.query.storeId,this.conditionObj.dateRange=t?[e,t]:[],this.brandId&&this.getTableList()},selectInit:function(e,t){return 0!=e.removeAble},handleCommand:function(e){this.selectRadio=e},selectBrandId:function(e){this.activeBrand=e},setSelectTab:function(e){this.activeTab=e.tabId},changeSelect:function(){this.currentPage=1,this.getTableList()},changeDate:function(e){e||(this.conditionObj.dateRange=[]),this.currentPage=1,this.getTableList()},handleSelectionChange:function(e){this.multipleSelection=e},multDel:function(){if(!this.multipleSelection.length)return this.$message.error({duration:1e3,message:"请选择删除项"}),!1;this.showDialog=!0},hideDialog:function(e){if(this.showDialog=!1,!o()(e).length)return!1;this.postMultDel(e)},postMultDel:function(e){var t=this,a={storeId:t.conditionObj.storeId,taskIds:t.multipleSelection.map(function(e){return e.taskId}).join(",")||"",isOverTime:t.conditionObj.isOverTime||"",isCompleted:t.conditionObj.isCompleted||"",reason:e.reason,startDate:t.conditionObj.dateRange[0]||"",endDate:t.conditionObj.dateRange[1]||"",brandId:t.activeBrand,isAll:t.selectRadio};Object(s.e)("/haoban-app-performance-web/performance/batch-remove-clerk-month-performance-task",a).then(function(e){var a=e.data;if(1==a.errorCode)return c.a.showmsg("删除成功","success"),void t.getTableList();r.a.errorMsg(a)}).catch(function(e){t.$message.error({duration:1e3,message:e.message})})},handleSizeChange:function(e){this.pageSize=e,this.getTableList()},handleCurrentChange:function(e){this.currentPage=e,this.getTableList()},handleDel:function(e,t){var a=this;this.$confirm("确认要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.postDel(e,t)}).catch(function(){})},postDel:function(e,t){var a=this,n={taskId:t.taskId,brandId:this.activeBrand};Object(s.a)("/haoban-app-performance-web/performance/remove-clerk-month-performance-task",n).then(function(t){var n=t.data;if(1==n.errorCode)return a.total--,a.tableData.splice(e,1),0==a.tableData.length&&(a.currentPage>1?(a.currentPage--,a.getTableList()):a.total>0&&a.getTableList()),void a.$message.success("删除成功");r.a.errorMsg(n)}).catch(function(e){this.$message.error({duration:1e3,message:e.message})})},getTableList:function(e){var t=this,a={storeId:t.conditionObj.storeId||"",isOverTime:t.conditionObj.isOverTime||"",isCompleted:t.conditionObj.isCompleted||"",startDate:t.conditionObj.dateRange[0]||"",endDate:t.conditionObj.dateRange[1]||"",pageNum:t.currentPage,pageSize:t.pageSize,brandId:t.activeBrand};Object(s.a)("/haoban-app-performance-web/performance/query-clerk-month-performance-task",a).then(function(e){var a=e.data;if(1==a.errorCode)return t.tableData=a.result.list||[],void(t.total=a.result.pageInfo.total);r.a.errorMsg(a)}).catch(function(e){t.$message.error({duration:1e3,message:e.message})})}},watch:{brandId:function(e,t){e&&(this.activeBrand=e,this.getTableList())}},activated:function(){this.init()},mounted:function(){this.init()},destroyed:function(){document.documentElement.style.backgroundColor="#fff"},components:{commonDetailTop:i.a,multipleDel:l.a}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-customer-wrap common-set-wrap common-right-wrap"},[a("common-detail-top",{attrs:{topMenuData:e.topMenuData,activeId:e.activeId}}),e._v(" "),a("div",{staticClass:"daily-set-content boder-box"},[a("div",{staticClass:"table-condition flex flex-space-between m-b-23"},[a("div",{staticClass:"table-condition-left"},[a("el-select",{staticClass:"w-105 m-l-10",attrs:{placeholder:"请选择"},on:{change:e.changeSelect},model:{value:e.conditionObj.isOverTime,callback:function(t){e.$set(e.conditionObj,"isOverTime",t)},expression:"conditionObj.isOverTime"}},e._l(e.overOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{staticClass:"w-105 m-l-10",attrs:{placeholder:"请选择"},on:{change:e.changeSelect},model:{value:e.conditionObj.isCompleted,callback:function(t){e.$set(e.conditionObj,"isCompleted",t)},expression:"conditionObj.isCompleted"}},e._l(e.completedOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-date-picker",{staticClass:"m-l-10",staticStyle:{width:"310px"},attrs:{editable:!1,"value-format":"yyyy-MM",type:"monthrange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},on:{change:e.changeDate},model:{value:e.conditionObj.dateRange,callback:function(t){e.$set(e.conditionObj,"dateRange",t)},expression:"conditionObj.dateRange"}})],1),e._v(" "),a("div",{staticClass:"table-condition-right"},[a("el-button",{attrs:{type:"danger"},on:{click:e.multDel}},[e._v("批量删除")])],1)]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"select-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"35",selectable:e.selectInit}}),e._v(" "),a("el-table-column",{attrs:{width:"25"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-dropdown",{staticStyle:{"line-height":"10px",padding:"0","margin-left":"-15px",transform:"translateY(4px)","-webkit-transform":"translateY(4px)"},attrs:{placement:"bottom-start"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[a("span",{style:{color:0==e.selectRadio?"#1890ff":"#606266"}},[e._v("选择当页")])]),e._v(" "),a("el-dropdown-item",{attrs:{command:"1"}},[a("span",{style:{color:1==e.selectRadio?"#1890ff":"#606266"}},[e._v("选择全部")])])],1)],1)]}},{key:"default",fn:function(e){}}])}),e._v(" "),a("el-table-column",{attrs:{label:"指派对象",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"flex flex-pack-center flex-start"},[a("div",{class:["image-wrap flex flex-align-center flex-pack-center",t.row.headImgUrl?"bg-eceaeb":"bg-82c5ff"]},[t.row.headImgUrl?a("img",{attrs:{src:t.row.headImgUrl,alt:""}}):a("i",{staticClass:"iconfont icon-yewuduanmorentouxian"})]),e._v(" "),a("div",{staticClass:"clerk-info flex flex-column flex-space-between m-l-16"},[a("p",{staticClass:"first-item font-14 color-303133"},[e._v(e._s(t.row.clerkName))]),e._v(" "),a("p",{staticClass:"font-14 color-909399"},[e._v(e._s(t.row.clerkPhone))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatTimeYMD")(t.row.createTime)))]),e._v(" "),a("div",{staticClass:"color-909399"},[e._v(e._s(e._f("formatTimeHMS")(t.row.createTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"完成期限","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatTimeYMD")(t.row.lastTime)))]),e._v(" "),a("div",{staticClass:"color-909399"},[e._v(e._s(e._f("formatTimeHMS")(t.row.lastTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"逾期情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.isOverTime))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"完成情况"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.isCompleted))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"完成时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("formatTimeYMD")(t.row.finishTime)))]),e._v(" "),a("div",{staticClass:"color-909399"},[e._v(e._s(e._f("formatTimeHMS")(t.row.finishTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.removeAble?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")]):a("span",[e._v("--")])]}}])})],1),e._v(" "),0!=e.tableData.length?a("div",{staticClass:"block common-wrap__page text-right m-t-24"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1),e._v(" "),a("multiple-del",{attrs:{showDialog:e.showDialog,detailFlag:!0,detailShowFlag:!0},on:{hideDialog:e.hideDialog}})],1)},staticRenderFns:[]};var m=a("VU/8")(d,u,!1,function(e){a("K4js")},"data-v-38b15839",null);t.default=m.exports}});