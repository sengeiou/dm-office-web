webpackJsonp([38],{ZxDn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),o=a("exGp"),s=a.n(o),i=a("Ke24"),c=a("Ch4/"),l=a("PI0u"),u=a("P9l9"),p={components:{commonDetailTop:i.a},props:{brandId:{type:String,default:""}},data:function(){return{activeId:"2",topMenuData:[{id:"1",name:"指标管理",path:"/quota?appIcon="+this.$route.query.appIcon},{id:"2",name:"月指标",path:""}],yearList:[],year:"",tableList:[],tabelHeader:[{prop:"yearMonth",label:"月份"},{prop:"totalPerformance",label:"月指标累计"},{prop:"totalStore",label:"门店总数"},{prop:"totalComplete",label:"门店指标完善数"}],currentPage:1,pageSize:20,total:0}},watch:{brandId:function(e){e&&this.getYearList()}},methods:{handleSizeChange:function(e){this.pageSize=e,this.apiMonthPerformanceList()},handleCurrentChange:function(e){this.currentPage=e,this.apiMonthPerformanceList()},changeYear:function(){this.currentPage=1,this.apiMonthPerformanceList()},getYearList:function(){var e=this;return s()(n.a.mark(function t(){var a,r,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,n={brandId:a.brandId},Object(u.a)("/haoban-app-performance-web/performance/get-years",n);case 3:r=t.sent,1==(o=r.data).errorCode?(a.yearList=[],o.result&&o.result.length&&(o.result.forEach(function(e){a.yearList.push({id:e,label:e+"年"})}),a.year=o.result[0],a.apiMonthPerformanceList())):c.a.errorMsg(o);case 6:case"end":return t.stop()}var n},t,e)}))()},apiMonthPerformanceList:function(){var e=this;return s()(n.a.mark(function t(){var a,r,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,n={brandId:e.brandId,year:e.year},Object(u.a)("/haoban-app-performance-web/performance/query-month-performance",n);case 3:r=t.sent,1==(o=r.data).errorCode&&(o.result.length&&o.result.forEach(function(e){e.totalPerformance=Object(l.d)(Number(e.totalPerformance).toFixed(2))}),a.tableList=o.result||[]);case 6:case"end":return t.stop()}var n},t,e)}))()}},mounted:function(){this.$emit("showTab","11"),this.brandId&&this.getYearList()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"common-right-wrap"},[a("common-detail-top",{attrs:{topMenuData:e.topMenuData,activeId:e.activeId}}),e._v(" "),a("div",{staticClass:"m-20"},[a("el-select",{staticClass:"m-b-23 w-123",on:{change:e.changeYear},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},[a("i",{staticClass:"el-input__icon el-icon-date",attrs:{slot:"prefix"},slot:"prefix"}),e._v(" "),e._l(e.yearList,function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.label}})})],2),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[e._l(e.tabelHeader,function(e,t){return a("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.settingStatus?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.$router.push("/storeMonthTask?yearMonth="+t.row.yearMonth+"&appIcon="+e.$route.query.appIcon+" ")}}},[e._v("门店月指标")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.$router.push("/companyDaySet?yearMonth="+t.row.yearMonth+"&appIcon="+e.$route.query.appIcon)}}},[e._v("商户日权重")])]}}])})],2),e._v(" "),0!=e.tableList.length?a("div",{staticClass:"block common-wrap__page text-right m-t-24"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)],1)},staticRenderFns:[]};var d=a("VU/8")(p,h,!1,function(e){a("kT9X")},"data-v-9dd05db2",null);t.default=d.exports},kT9X:function(e,t){}});